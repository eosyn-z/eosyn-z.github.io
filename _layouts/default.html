<!DOCTYPE html>
<html lang="{{ page.lang | default: site.lang | default: "en" }}">

  {%- include head.html -%} 

  <body data-theme="c">
    <header class="glass-nav top-nav">
      <div class="nav-container">
        {%- include navigation.html -%}
      </div>
    </header>
    <main class="main-content">
      {{ content }}
    </main>

    {%- if page.url == "/desktop/" -%}
    {%- include bottom_bar.html -%}
    {%- endif -%}

    <div id="desktop-background"></div>
    <div id="window-container"></div>
    
    {%- if page.url == "/" or page.url == "/index.html" or page.url == "" or page.url == nil -%}
    <!-- Cookie Consent -->
    <div class="cookie-consent glass-card" id="cookieConsent" style="display: none;">
      <h3 style="margin: 0 0 10px 0; color: var(--theme-text-primary); font-size: 16px;">üç™ Cookie Notice</h3>
      <p style="margin: 0 0 15px 0; color: var(--theme-text-secondary); font-size: 14px; line-height: 1.5;">This website uses cookies to save your theme preference and improve your experience. We only store your theme choice and don't track any personal information.</p>
      <div class="cookie-buttons">
        <button class="glass-button cookie-btn reject" onclick="rejectCookies()">Reject</button>
        <button class="glass-button cookie-btn accept" onclick="acceptCookies()">Accept</button>
      </div>
    </div>
    {%- endif -%}
    <script>
      // Pass the site's base URL to the JavaScript environment
      window.siteBaseUrl = "{{ site.baseurl | default: '' }}";
      // Load all site pages into a global variable for scripts to use
      window.jekyllPages = {% include all_pages_json.html %};
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.15.2/Sortable.min.js"></script>
    <script src="{{ "/assets/js/app-window.js" | relative_url }}"></script>
    <script src="{{ "/assets/js/theme-switcher.js" | relative_url }}"></script>
    <script src="{{ "/assets/js/desktop.js" | relative_url }}"></script>
    <script src="{{ "/assets/js/favorites.js" | relative_url }}"></script>
    <script src="{{ "/assets/js/theme-editor.js" | relative_url }}"></script>
    <script src="{{ "/assets/js/sticky_notes_manager.js" | relative_url }}"></script>
    <script>
      // Set initial view state class on body
      const desktopUrl = '{{ "/desktop" | relative_url }}';
      if (window.location.pathname.startsWith(desktopUrl)) {
        document.body.classList.add('desktop-view-active');
      }
    </script>
  </body>

</html> 
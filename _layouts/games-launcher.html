<!DOCTYPE html>
<html lang="{{ page.lang | default: site.lang | default: "en" }}">
  <head>
    {%- include head.html -%}
    <script>
      // Games data - will be populated from Jekyll collection
      window.gamesData = {% include games-data.html %};
    </script>
    <style>
      .games-launcher {
        display: flex;
        height: 100vh;
        background: var(--glass-bg-light);
      }
      
      .games-sidebar {
        width: 300px;
        background: var(--glass-bg-medium);
        border-right: 1px solid var(--glass-border-light);
        padding: 1rem;
        overflow-y: auto;
      }
      
      .games-viewer {
        flex: 1;
        padding: 2rem;
        display: flex;
        flex-direction: column;
      }
      
      .game-button {
        display: flex;
        align-items: center;
        padding: 1rem;
        margin-bottom: 0.5rem;
        background: var(--glass-bg-light);
        border: 1px solid var(--glass-border-light);
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.2s ease;
        text-decoration: none;
        color: var(--theme-text);
      }
      
      .game-button:hover {
        background: var(--glass-bg-dark);
        transform: translateX(4px);
      }
      
      .game-button.active {
        background: var(--theme-accent);
        color: white;
        border-color: var(--theme-accent);
      }
      
      .game-icon {
        font-size: 1.5rem;
        margin-right: 1rem;
        width: 2rem;
        text-align: center;
      }
      
      .game-info {
        flex: 1;
      }
      
      .game-title {
        font-weight: 600;
        margin-bottom: 0.25rem;
      }
      
      .game-description {
        font-size: 0.9rem;
        opacity: 0.8;
      }
      
      .game-viewer-content {
        flex: 1;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        background: var(--glass-bg-medium);
        border-radius: 12px;
        border: 1px solid var(--glass-border-light);
        padding: 2rem;
      }
      
      .game-placeholder {
        text-align: center;
        color: var(--theme-text-secondary);
      }
      
      .game-placeholder h2 {
        margin-bottom: 1rem;
        color: var(--theme-text);
      }
      
      .launch-game-btn {
        background: var(--theme-accent);
        color: white;
        border: none;
        padding: 1rem 2rem;
        border-radius: 8px;
        font-size: 1.1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s ease;
        margin-top: 1rem;
      }
      
      .launch-game-btn:hover {
        background: var(--theme-accent-dark);
        transform: translateY(-2px);
      }
      
      .games-header {
        margin-bottom: 1rem;
        padding-bottom: 1rem;
        border-bottom: 1px solid var(--glass-border-light);
      }
      
      .games-header h2 {
        margin: 0;
        color: var(--theme-text);
      }
      
      .games-header p {
        margin: 0.5rem 0 0 0;
        color: var(--theme-text-secondary);
        font-size: 0.9rem;
      }
      
      /* Desktop mode adjustments */
      .desktop-mode .games-launcher {
        height: calc(100vh - 60px);
        margin-top: 60px;
      }
      
      /* Responsive design */
      @media (max-width: 768px) {
        .games-launcher {
          flex-direction: column;
        }
        
        .games-sidebar {
          width: 100%;
          height: 200px;
          border-right: none;
          border-bottom: 1px solid var(--glass-border-light);
        }
      }
    </style>
  </head>
  <body data-theme="c">
    <header class="glass-nav top-nav">
      <div class="nav-container">
        {%- include navigation.html -%}
      </div>
    </header>
    
    <div class="games-launcher">
      <div class="games-sidebar">
        <div class="games-header">
          <h2>ðŸŽ® Classic Game Launcher</h2>
          <p>Select a game to play</p>
        </div>
        <div id="games-list">
          <!-- Games will be populated here by JavaScript -->
        </div>
      </div>
      
      <div class="games-viewer">
        <div id="game-viewer-content" class="game-viewer-content">
          <div class="game-placeholder">
            <h2>Welcome to the Game Launcher!</h2>
            <p>Select a game from the sidebar to get started.</p>
          </div>
        </div>
      </div>
    </div>

    <script>
      let currentGame = null;

      function populateGamesList() {
        const gamesList = document.getElementById('games-list');
        gamesList.innerHTML = '';

        window.gamesData.forEach(game => {
          const gameButton = document.createElement('div');
          gameButton.className = 'game-button';
          gameButton.onclick = () => selectGame(game);
          
          gameButton.innerHTML = `
            <div class="game-icon">${game.icon}</div>
            <div class="game-info">
              <div class="game-title">${game.title}</div>
              <div class="game-description">${game.description}</div>
            </div>
          `;
          
          gamesList.appendChild(gameButton);
        });
      }

      function selectGame(game) {
        // Update active button
        document.querySelectorAll('.game-button').forEach(btn => {
          btn.classList.remove('active');
        });
        event.currentTarget.classList.add('active');
        
        currentGame = game;
        
        // Update viewer content
        const viewerContent = document.getElementById('game-viewer-content');
        viewerContent.innerHTML = `
          <div class="game-placeholder">
            <h2>${game.icon} ${game.title}</h2>
            <p>${game.description}</p>
            <button class="launch-game-btn" onclick="launchGame('${game.id}')">
              ðŸŽ® Launch ${game.title}
            </button>
          </div>
        `;
      }

      function launchGame(gameId) {
        if (window.windowManager) {
          // Launch in desktop window mode
          window.windowManager.createWindow(gameId, currentGame.title);
        } else {
          // Fallback: navigate to game page
          const game = window.gamesData.find(g => g.id === gameId);
          if (game && game.permalink) {
            window.location.href = game.permalink;
          }
        }
      }

      // Initialize when DOM is loaded
      document.addEventListener('DOMContentLoaded', () => {
        populateGamesList();
        
        // Select first game by default
        if (window.gamesData.length > 0) {
          const firstGameButton = document.querySelector('.game-button');
          if (firstGameButton) {
            firstGameButton.click();
          }
        }
      });
    </script>
  </body>
</html> 